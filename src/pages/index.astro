---
import ClubInformation from "@/components/ClubInformation.astro";
import Layout from "@layouts/Layout.astro";

import FeaturedBooks from "@/components/FeaturedBooks.astro";
import HeroSection from "@/components/HeroSection";
import { fetchAllBooks } from "@/services/book.service";

const booksData = await fetchAllBooks();

const books = Object.values(booksData)
  .filter((book) => !book.comments)
  .sort((a, b) => b.createdAt - a.createdAt);

const lastBook = books[0];
---

<Layout title="Club de Lectura - UNPRG" lang="es-PE">
  <HeroSection client:load />
  <ClubInformation book={lastBook} />
  <FeaturedBooks books={books} />
</Layout>
